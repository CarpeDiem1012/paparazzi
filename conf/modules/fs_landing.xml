<!DOCTYPE module SYSTEM "module.dtd">

<module name="fs_landing" dir="fs_landing">
  <doc>
    <description>
      Flat spin controller
    </description>
  </doc>

  <settings>
    <dl_settings name="Flat Spin Landing">
      <dl_settings name="Pre Spin Settings">
        <dl_setting min="0" max="1" var="use_pre_spin" type="uint8_t" module="fs_landing/fs_landing" />
        <dl_setting min="0" max="5" step="0.01" var="pre_spin_pitch_coeff" type="float" module="fs_landing/fs_landing" />
        <dl_setting min="5" max="15" step="0.1" var="pre_spin_speed_setpoint" type="float" module="fs_landing/fs_landing" />
        <dl_setting min="0" max="1" step="0.01" var="pre_spin_trim_percentage" type="float" module="fs_landing/fs_landing" />
        <dl_setting min="-1" max="15" step="0.5" var="err_test" type="float" module="fs_landing/fs_landing" />
      </dl_settings>
      <dl_settings name="Feed Forward Settings">
        <dl_setting min="0.1" max="10" step="0.1" shortname="FF Duration" var="ff_duration" type="float" module="fs_landing/feed_forward" />
        <dl_setting min="-9600" max="9600" step="50" shortname="THR_L FF" var="thr_l_ff" type="float" module="fs_landing/feed_forward" />
        <dl_setting min="-9600" max="9600" step="50" shortname="THR_R FF" var="thr_r_ff" type="float" module="fs_landing/feed_forward" />
        <dl_setting min="-9600" max="9600" step="50" shortname="ELEV_L FF" var="elev_l_ff" type="float" module="fs_landing/feed_forward" />
        <dl_setting min="-9600" max="9600" step="50" shortname="ELEV_R FF" var="elev_r_ff" type="float" module="fs_landing/feed_forward" />
        <dl_setting min="-9600" max="9600" step="50" shortname="THR_L Spin" var="thr_l_spinning" type="float" module="fs_landing/feed_forward" />
        <dl_setting min="-9600" max="9600" step="50" shortname="THR_R Spin" var="thr_r_spinning" type="float" module="fs_landing/feed_forward" />
        <dl_setting min="-9600" max="9600" step="50" shortname="ELEV_L Spin" var="elev_l_spinning" type="float" module="fs_landing/feed_forward" />
        <dl_setting min="-9600" max="9600" step="50" shortname="ELEV_R Spin" var="elev_r_spinning" type="float" module="fs_landing/feed_forward" />
      </dl_settings>
      <dl_settings name="Pilot Control">
        <dl_setting min="0" max="1" step="1" shortname="Active" var="pilot_has_control" type="uint8_t" module="fs_landing/fs_landing" handler="pilot_control_handler" />
      </dl_settings>
      <dl_settings name="Actuator Identification">
        <dl_setting min="0" max="5" step="1" var="selected_actuator" shortname="Actuator No" type="uint8_t" module="fs_landing/actuator_id"/>
        <dl_setting min="0" max="19400" step="10" var="max_delta_amplitude" shortname="Max Act Delta" type="float" module="fs_landing/actuator_id"/>
        <dl_setting min="0" max="1" step="1" values="Inactive|Active" var="act_identification_active" shortname="Activate ID" type="uint8_t" module="fs_landing/fs_landing" handler="actuator_id_handler">
          <strip_button name="Act_ID Start" value="1"/>
          <strip_button name="Act_ID Stop" value="0"/>
        </dl_setting>
      </dl_settings>
<!--      <dl_settings name="Act Frequency Test">-->
<!--        <dl_setting min="0" step="0.01" max="4" var="test_freq" shortname="Frequency" type="float" module="fs_landing/actuator_freq_test"/>-->
<!--      </dl_settings>-->
    </dl_settings>
  </settings>

  <header>
    <file name="fs_landing.h"/>
  </header>

  <init fun="fs_landing_init()"/>
  <periodic fun="fs_landing_run()"/>

  <makefile>
    <file name="fs_landing.c"/>
    <file name="feed_forward.c"/>
    <file name="pilot_test.c"/>
    <file name="actuator_id.c"/>
    <file name="actuator_freq_test.c"/>
  </makefile>

</module>

